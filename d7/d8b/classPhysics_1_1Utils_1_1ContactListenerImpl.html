<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EngineSquared: Physics::Utils::ContactListenerImpl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">EngineSquared<span id="projectnumber">&#160;0.2.0</span>
   </div>
   <div id="projectbrief">Open-source physics game engine written in C++. Developed as part of the 4th/5th year graduation project at Epitech (EIP).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d3/d3f/classPhysics_1_1Utils_1_1ContactListenerImpl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Physics::Utils::ContactListenerImpl Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>ContactListener implementation.  
 <a href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/dfb/ContactListenerImpl_8hpp_source.html">ContactListenerImpl.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for Physics::Utils::ContactListenerImpl:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa428c5e5e871d132d7a99937e7444876" id="r_aa428c5e5e871d132d7a99937e7444876"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#aa428c5e5e871d132d7a99937e7444876">ContactListenerImpl</a> ()=delete</td></tr>
<tr class="separator:aa428c5e5e871d132d7a99937e7444876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac293937fb898f87383b67054af6628e2" id="r_ac293937fb898f87383b67054af6628e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#ac293937fb898f87383b67054af6628e2">ContactListenerImpl</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="separator:ac293937fb898f87383b67054af6628e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993aa9eaa7cd0051cab584a6ad5f5b75" id="r_a993aa9eaa7cd0051cab584a6ad5f5b75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a993aa9eaa7cd0051cab584a6ad5f5b75">~ContactListenerImpl</a> () override=default</td></tr>
<tr class="separator:a993aa9eaa7cd0051cab584a6ad5f5b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7345d3d76ca20eb212b222ac07b9c231" id="r_a7345d3d76ca20eb212b222ac07b9c231"><td class="memItemLeft" align="right" valign="top">JPH::ValidateResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a7345d3d76ca20eb212b222ac07b9c231">OnContactValidate</a> (const JPH::Body &amp;inBody1, const JPH::Body &amp;inBody2, JPH::RVec3Arg inBaseOffset, const JPH::CollideShapeResult &amp;inCollisionResult) override</td></tr>
<tr class="separator:a7345d3d76ca20eb212b222ac07b9c231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b6393be44f6c13ef405d1abcc88588d" id="r_a7b6393be44f6c13ef405d1abcc88588d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a7b6393be44f6c13ef405d1abcc88588d">OnContactAdded</a> (const JPH::Body &amp;inBody1, const JPH::Body &amp;inBody2, const JPH::ContactManifold &amp;inManifold, JPH::ContactSettings &amp;ioSettings) override</td></tr>
<tr class="memdesc:a7b6393be44f6c13ef405d1abcc88588d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when two bodies start to make contact.  <br /></td></tr>
<tr class="separator:a7b6393be44f6c13ef405d1abcc88588d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b521185e4ace10cf6854febfa35157" id="r_a54b521185e4ace10cf6854febfa35157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a54b521185e4ace10cf6854febfa35157">OnContactPersisted</a> (const JPH::Body &amp;inBody1, const JPH::Body &amp;inBody2, const JPH::ContactManifold &amp;inManifold, JPH::ContactSettings &amp;ioSettings) override</td></tr>
<tr class="memdesc:a54b521185e4ace10cf6854febfa35157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when two bodies continue to make contact.  <br /></td></tr>
<tr class="separator:a54b521185e4ace10cf6854febfa35157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2020744e4cad6981994e27c502cec0cc" id="r_a2020744e4cad6981994e27c502cec0cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a2020744e4cad6981994e27c502cec0cc">OnContactRemoved</a> (const JPH::SubShapeIDPair &amp;inSubShapePair) override</td></tr>
<tr class="memdesc:a2020744e4cad6981994e27c502cec0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when two bodies cease to make contact.  <br /></td></tr>
<tr class="separator:a2020744e4cad6981994e27c502cec0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f04b6b4da2958e077f407a039d387f" id="r_a77f04b6b4da2958e077f407a039d387f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html#a77f04b6b4da2958e077f407a039d387f">ProcessBufferedEvents</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a77f04b6b4da2958e077f407a039d387f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush buffered events to the main thread EventManager (should be called from main thread)  <br /></td></tr>
<tr class="separator:a77f04b6b4da2958e077f407a039d387f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ContactListener implementation. </p>
<p>This is used to define callbacks for contact events between bodies. Callbacks will be called with the Core, as well as the two entities that collided.</p>
<dl class="section note"><dt>Note</dt><dd>Jolt will call these callbacks from physics worker threads. To avoid concurrent access to engine resources (like the entt registry) and the EventManager, events are buffered in worker threads and flushed to the main thread by calling <code>ProcessBufferedEvents(core)</code> from the main physics update system. Do NOT call EventManager::PushEvent() directly in these callbacks. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa428c5e5e871d132d7a99937e7444876" name="aa428c5e5e871d132d7a99937e7444876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa428c5e5e871d132d7a99937e7444876">&#9670;&#160;</a></span>ContactListenerImpl() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Physics::Utils::ContactListenerImpl::ContactListenerImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac293937fb898f87383b67054af6628e2" name="ac293937fb898f87383b67054af6628e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac293937fb898f87383b67054af6628e2">&#9670;&#160;</a></span>ContactListenerImpl() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Physics::Utils::ContactListenerImpl::ContactListenerImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   40</span>: _core(core) {}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a993aa9eaa7cd0051cab584a6ad5f5b75" name="a993aa9eaa7cd0051cab584a6ad5f5b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a993aa9eaa7cd0051cab584a6ad5f5b75">&#9670;&#160;</a></span>~ContactListenerImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Physics::Utils::ContactListenerImpl::~ContactListenerImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7b6393be44f6c13ef405d1abcc88588d" name="a7b6393be44f6c13ef405d1abcc88588d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b6393be44f6c13ef405d1abcc88588d">&#9670;&#160;</a></span>OnContactAdded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::Utils::ContactListenerImpl::OnContactAdded </td>
          <td>(</td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::ContactManifold &amp;&#160;</td>
          <td class="paramname"><em>inManifold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JPH::ContactSettings &amp;&#160;</td>
          <td class="paramname"><em>ioSettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when two bodies start to make contact. </p>
<p>Right now we use 32 bits for entities IDs with EnTT but Jolt stores user data as 64 bits so we have to mask the upper 32 bits auto entity1 = static_cast&lt;Engine::Entity&gt;(inBody1.GetUserData() &amp; ENTITY_ID_MASK); auto entity2 = static_cast&lt;Engine::Entity&gt;(inBody2.GetUserData() &amp; ENTITY_ID_MASK);</p>
<p>Validate entity ids and buffer the event on a worker thread; it will be flushed on the main thread by the PhysicsUpdate system.</p>
<p>Buffer the event. Can't safely access the registry from a physics worker thread, so defer any entity validity checks until ProcessBufferedEvents (main thread).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inBody1</td><td>The first body involved in the contact. </td></tr>
    <tr><td class="paramname">inBody2</td><td>The second body involved in the contact. </td></tr>
    <tr><td class="paramname">inManifold</td><td>The contact manifold containing contact points. </td></tr>
    <tr><td class="paramname">ioSettings</td><td>Contact settings that can be modified. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   30</span>{</div>
<div class="line"><span class="lineno">   31</span>    <span class="keyword">auto</span> entity1 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(inBody1.GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   32</span>    <span class="keyword">auto</span> entity2 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(inBody2.GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>    std::scoped_lock lock(_bufferMutex);</div>
<div class="line"><span class="lineno">   35</span>    _bufferedAdded.emplace_back(<a class="code hl_struct" href="../../d6/de3/structPhysics_1_1Event_1_1CollisionAddedEvent.html">Physics::Event::CollisionAddedEvent</a>{entity1, entity2});</div>
<div class="line"><span class="lineno">   36</span>}</div>
<div class="ttc" id="astructEngine_1_1EntityId_html"><div class="ttname"><a href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a></div><div class="ttdoc">Represents a unique identifier for an entity in the Engine's entity-component system.</div><div class="ttdef"><b>Definition</b> EntityId.hpp:18</div></div>
<div class="ttc" id="astructPhysics_1_1Event_1_1CollisionAddedEvent_html"><div class="ttname"><a href="../../d6/de3/structPhysics_1_1Event_1_1CollisionAddedEvent.html">Physics::Event::CollisionAddedEvent</a></div><div class="ttdoc">Event triggered when a collision starts between two entities.</div><div class="ttdef"><b>Definition</b> CollisionEvent.hpp:10</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a54b521185e4ace10cf6854febfa35157" name="a54b521185e4ace10cf6854febfa35157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54b521185e4ace10cf6854febfa35157">&#9670;&#160;</a></span>OnContactPersisted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::Utils::ContactListenerImpl::OnContactPersisted </td>
          <td>(</td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::ContactManifold &amp;&#160;</td>
          <td class="paramname"><em>inManifold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JPH::ContactSettings &amp;&#160;</td>
          <td class="paramname"><em>ioSettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when two bodies continue to make contact. </p>
<p>Same as OnContactAdded: delay entity validation until ProcessBufferedEvents (main thread)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inBody1</td><td>The first body involved in the contact. </td></tr>
    <tr><td class="paramname">inBody2</td><td>The second body involved in the contact. </td></tr>
    <tr><td class="paramname">inManifold</td><td>The contact manifold containing contact points. </td></tr>
    <tr><td class="paramname">ioSettings</td><td>Contact settings that can be modified. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   40</span>{</div>
<div class="line"><span class="lineno">   41</span>    <span class="keyword">auto</span> entity1 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(inBody1.GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   42</span>    <span class="keyword">auto</span> entity2 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(inBody2.GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    std::scoped_lock lock(_bufferMutex);</div>
<div class="line"><span class="lineno">   45</span>    _bufferedPersisted.emplace_back(<a class="code hl_struct" href="../../d6/d3c/structPhysics_1_1Event_1_1CollisionPersistedEvent.html">Physics::Event::CollisionPersistedEvent</a>{entity1, entity2});</div>
<div class="line"><span class="lineno">   46</span>}</div>
<div class="ttc" id="astructPhysics_1_1Event_1_1CollisionPersistedEvent_html"><div class="ttname"><a href="../../d6/d3c/structPhysics_1_1Event_1_1CollisionPersistedEvent.html">Physics::Event::CollisionPersistedEvent</a></div><div class="ttdoc">Event triggered when a collision persists between two entities.</div><div class="ttdef"><b>Definition</b> CollisionEvent.hpp:18</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2020744e4cad6981994e27c502cec0cc" name="a2020744e4cad6981994e27c502cec0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2020744e4cad6981994e27c502cec0cc">&#9670;&#160;</a></span>OnContactRemoved()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::Utils::ContactListenerImpl::OnContactRemoved </td>
          <td>(</td>
          <td class="paramtype">const JPH::SubShapeIDPair &amp;&#160;</td>
          <td class="paramname"><em>inSubShapePair</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when two bodies cease to make contact. </p>
<p>Buffer the event on a worker thread; it will be flushed on the main thread by the PhysicsUpdate system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inSubShapePair</td><td>The pair of sub-shapes that were in contact. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{</div>
<div class="line"><span class="lineno">   50</span>    <span class="keyword">auto</span> &amp;physicsManager = _core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">   51</span>    <span class="keyword">auto</span> &amp;bodyInterface = physicsManager.<a class="code hl_function" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a72908afd09166411413362426a5ce745">GetPhysicsSystem</a>().GetBodyLockInterface();</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    JPH::Body *body1 = bodyInterface.TryGetBody(inSubShapePair.GetBody1ID());</div>
<div class="line"><span class="lineno">   54</span>    JPH::Body *body2 = bodyInterface.TryGetBody(inSubShapePair.GetBody2ID());</div>
<div class="line"><span class="lineno">   55</span>    <span class="keywordflow">if</span> (body1 == <span class="keyword">nullptr</span> || body2 == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   56</span>    {</div>
<div class="line"><span class="lineno">   57</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(<span class="stringliteral">&quot;ContactListenerImpl: OnContactRemoved: body1 or body2 is nullptr, skipping callbacks.&quot;</span>);</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   59</span>    }</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>    <span class="keyword">auto</span> entity1 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(body1-&gt;GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   62</span>    <span class="keyword">auto</span> entity2 = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a><span class="keyword">&gt;</span>(body2-&gt;GetUserData() &amp; ENTITY_ID_MASK);</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    std::scoped_lock lock(_bufferMutex);</div>
<div class="line"><span class="lineno">   65</span>    _bufferedRemoved.emplace_back(<a class="code hl_struct" href="../../d5/d58/structPhysics_1_1Event_1_1CollisionRemovedEvent.html">Physics::Event::CollisionRemovedEvent</a>{entity1, entity2});</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html_a29ab23da9acb31dbd5b13fa935754451"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">Engine::Core::GetResource</a></div><div class="ttdeci">TResource &amp; GetResource()</div><div class="ttdef"><b>Definition</b> Core.inl:14</div></div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1PhysicsManager_html"><div class="ttname"><a href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a></div><div class="ttdef"><b>Definition</b> PhysicsManager.hpp:25</div></div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1PhysicsManager_html_a72908afd09166411413362426a5ce745"><div class="ttname"><a href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a72908afd09166411413362426a5ce745">Physics::Resource::PhysicsManager::GetPhysicsSystem</a></div><div class="ttdeci">JPH::PhysicsSystem &amp; GetPhysicsSystem()</div><div class="ttdoc">Get a reference to the physics system.</div><div class="ttdef"><b>Definition</b> PhysicsManager.hpp:51</div></div>
<div class="ttc" id="anamespaceLog_html_a57f205dd59a28db869b6be0bd2441660"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a></div><div class="ttdeci">void Error(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:21</div></div>
<div class="ttc" id="astructPhysics_1_1Event_1_1CollisionRemovedEvent_html"><div class="ttname"><a href="../../d5/d58/structPhysics_1_1Event_1_1CollisionRemovedEvent.html">Physics::Event::CollisionRemovedEvent</a></div><div class="ttdoc">Event triggered when a collision ends between two entities.</div><div class="ttdef"><b>Definition</b> CollisionEvent.hpp:26</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7345d3d76ca20eb212b222ac07b9c231" name="a7345d3d76ca20eb212b222ac07b9c231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7345d3d76ca20eb212b222ac07b9c231">&#9670;&#160;</a></span>OnContactValidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JPH::ValidateResult Physics::Utils::ContactListenerImpl::OnContactValidate </td>
          <td>(</td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::Body &amp;&#160;</td>
          <td class="paramname"><em>inBody2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JPH::RVec3Arg&#160;</td>
          <td class="paramname"><em>inBaseOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JPH::CollideShapeResult &amp;&#160;</td>
          <td class="paramname"><em>inCollisionResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   47</span>    {</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">return</span> JPH::ValidateResult::AcceptAllContactsForThisBodyPair;</div>
<div class="line"><span class="lineno">   49</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a77f04b6b4da2958e077f407a039d387f" name="a77f04b6b4da2958e077f407a039d387f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77f04b6b4da2958e077f407a039d387f">&#9670;&#160;</a></span>ProcessBufferedEvents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::Utils::ContactListenerImpl::ProcessBufferedEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush buffered events to the main thread EventManager (should be called from main thread) </p>
<p>Move buffers into local copies under lock then push events to the EventManager from main thread. </p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>    std::vector&lt;Physics::Event::CollisionAddedEvent&gt; added;</div>
<div class="line"><span class="lineno">   71</span>    std::vector&lt;Physics::Event::CollisionPersistedEvent&gt; persisted;</div>
<div class="line"><span class="lineno">   72</span>    std::vector&lt;Physics::Event::CollisionRemovedEvent&gt; removed;</div>
<div class="line"><span class="lineno">   73</span>    {</div>
<div class="line"><span class="lineno">   74</span>        std::scoped_lock lock(_bufferMutex);</div>
<div class="line"><span class="lineno">   75</span>        added.swap(_bufferedAdded);</div>
<div class="line"><span class="lineno">   76</span>        persisted.swap(_bufferedPersisted);</div>
<div class="line"><span class="lineno">   77</span>        removed.swap(_bufferedRemoved);</div>
<div class="line"><span class="lineno">   78</span>    }</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">if</span> (added.empty() &amp;&amp; persisted.empty() &amp;&amp; removed.empty())</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="keyword">auto</span> &amp;eventManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../de/d6c/classEvent_1_1Resource_1_1EventManager.html">::Event::Resource::EventManager</a>&gt;();</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : added)</div>
<div class="line"><span class="lineno">   86</span>    {</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">if</span> (core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity1) &amp;&amp; core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity2))</div>
<div class="line"><span class="lineno">   88</span>            eventManager.<a class="code hl_function" href="../../de/d6c/classEvent_1_1Resource_1_1EventManager.html#a5acb608e03541c92ba195e79b3b508fc">PushEvent</a>(e);</div>
<div class="line"><span class="lineno">   89</span>    }</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : persisted)</div>
<div class="line"><span class="lineno">   91</span>    {</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> (core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity1) &amp;&amp; core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity2))</div>
<div class="line"><span class="lineno">   93</span>            eventManager.PushEvent(e);</div>
<div class="line"><span class="lineno">   94</span>    }</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : removed)</div>
<div class="line"><span class="lineno">   96</span>    {</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">if</span> (core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity1) &amp;&amp; core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">IsEntityValid</a>(e.entity2))</div>
<div class="line"><span class="lineno">   98</span>            eventManager.PushEvent(e);</div>
<div class="line"><span class="lineno">   99</span>    }</div>
<div class="line"><span class="lineno">  100</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html_a3fc572f677c4d32a71d103f4cfb7a830"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#a3fc572f677c4d32a71d103f4cfb7a830">Engine::Core::IsEntityValid</a></div><div class="ttdeci">bool IsEntityValid(Id entity) const</div><div class="ttdef"><b>Definition</b> Core.cpp:95</div></div>
<div class="ttc" id="aclassEvent_1_1Resource_1_1EventManager_html"><div class="ttname"><a href="../../de/d6c/classEvent_1_1Resource_1_1EventManager.html">Event::Resource::EventManager</a></div><div class="ttdoc">Thread-safe event manager for registering, queuing, and dispatching events.</div><div class="ttdef"><b>Definition</b> EventManager.hpp:23</div></div>
<div class="ttc" id="aclassEvent_1_1Resource_1_1EventManager_html_a5acb608e03541c92ba195e79b3b508fc"><div class="ttname"><a href="../../de/d6c/classEvent_1_1Resource_1_1EventManager.html#a5acb608e03541c92ba195e79b3b508fc">Event::Resource::EventManager::PushEvent</a></div><div class="ttdeci">void PushEvent(const TEvent &amp;event)</div><div class="ttdoc">Queue an event for processing.</div><div class="ttdef"><b>Definition</b> EventManager.hpp:104</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/plugin/physics/src/utils/<a class="el" href="../../d8/dfb/ContactListenerImpl_8hpp_source.html">ContactListenerImpl.hpp (1de556d48b65f8aa90d3f384a7458d5c7999e756)</a></li>
<li>src/plugin/physics/src/utils/<a class="el" href="../../d7/d12/ContactListenerImpl_8cpp.html">ContactListenerImpl.cpp (1de556d48b65f8aa90d3f384a7458d5c7999e756)</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d8/d54/namespacePhysics.html">Physics</a></li><li class="navelem"><a class="el" href="../../d5/d85/namespacePhysics_1_1Utils.html">Utils</a></li><li class="navelem"><a class="el" href="../../d7/d8b/classPhysics_1_1Utils_1_1ContactListenerImpl.html">ContactListenerImpl</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
