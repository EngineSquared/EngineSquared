<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EngineSquared: Physics::System Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">EngineSquared<span id="projectnumber">&#160;0.2.0</span>
   </div>
   <div id="projectbrief">Open-source physics game engine written in C++. Developed as part of the 4th/5th year graduation project at Epitech (EIP).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d2/dcc/namespacePhysics_1_1System.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Physics::System Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html">ConstraintContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7a/structPhysics_1_1System_1_1CreateSettingsResult.html">CreateSettingsResult</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Result of creating Jolt shared settings, includes vertex mapping.  <a href="../../d6/d7a/structPhysics_1_1System_1_1CreateSettingsResult.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d87/structPhysics_1_1System_1_1DeduplicatedMesh.html">DeduplicatedMesh</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure holding deduplicated mesh data for Jolt soft body.  <a href="../../d5/d87/structPhysics_1_1System_1_1DeduplicatedMesh.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db4/structPhysics_1_1System_1_1Vec3Equal.html">Vec3Equal</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equality function for glm::vec3 (exact comparison)  <a href="../../dd/db4/structPhysics_1_1System_1_1Vec3Equal.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dd4/structPhysics_1_1System_1_1Vec3Hash.html">Vec3Hash</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hash function for glm::vec3 to use in unordered_map.  <a href="../../da/dd4/structPhysics_1_1System_1_1Vec3Hash.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaf3759cb69edec7597e9b10dd7233240" id="r_aaf3759cb69edec7597e9b10dd7233240"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Component::RigidBodyInternal</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#aaf3759cb69edec7597e9b10dd7233240">GetBodyInternal</a> (<a class="el" href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a> entity, const char *constraintName, const char *bodyName)</td></tr>
<tr class="separator:aaf3759cb69edec7597e9b10dd7233240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fef0594e67eb13565da21d2cd766e2" id="r_a76fef0594e67eb13565da21d2cd766e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a76fef0594e67eb13565da21d2cd766e2">FinalizeConstraint</a> (<a class="el" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html">ConstraintContext</a> &amp;ctx, <a class="el" href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a> entity, JPH::Constraint *joltConstraint, <a class="el" href="../../d6/db3/namespacePhysics_1_1Component.html#adbd3f098c9d4f22544549ab72475347c">Component::ConstraintType</a> type, const <a class="el" href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html">Component::ConstraintSettings</a> &amp;settings, const char *constraintName)</td></tr>
<tr class="separator:a76fef0594e67eb13565da21d2cd766e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff7dce27585ff31c5cdb1e632aa140c" id="r_a9ff7dce27585ff31c5cdb1e632aa140c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a9ff7dce27585ff31c5cdb1e632aa140c">DestroyConstraint</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html#a92a3143c58cadead136a795f192ee544">Engine::Core::Registry</a> &amp;registry, <a class="el" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a> entity, const char *constraintName)</td></tr>
<tr class="separator:a9ff7dce27585ff31c5cdb1e632aa140c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39566de928e393d0d0e1007bfef6a9fa" id="r_a39566de928e393d0d0e1007bfef6a9fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a39566de928e393d0d0e1007bfef6a9fa">InitConstraintSystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="separator:a39566de928e393d0d0e1007bfef6a9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb69f15db8835d5875a535db4cd320a" id="r_a4bb69f15db8835d5875a535db4cd320a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a4bb69f15db8835d5875a535db4cd320a">InitJoltPhysics</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a4bb69f15db8835d5875a535db4cd320a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init internal elements needed by JoltPhysics.  <br /></td></tr>
<tr class="separator:a4bb69f15db8835d5875a535db4cd320a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ac16a98125641e649aa8060019db69" id="r_ab3ac16a98125641e649aa8060019db69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#ab3ac16a98125641e649aa8060019db69">InitPhysicsManager</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:ab3ac16a98125641e649aa8060019db69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init the PhysicsManager.  <br /></td></tr>
<tr class="separator:ab3ac16a98125641e649aa8060019db69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9845915a4c073e95a895156db7dd69a8" id="r_a9845915a4c073e95a895156db7dd69a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a9845915a4c073e95a895156db7dd69a8">PhysicsUpdate</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a9845915a4c073e95a895156db7dd69a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies every update of the physics system.  <br /></td></tr>
<tr class="separator:a9845915a4c073e95a895156db7dd69a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a4d862222600d45b01545bd242c18a" id="r_ac2a4d862222600d45b01545bd242c18a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#ac2a4d862222600d45b01545bd242c18a">InitRigidBodySystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:ac2a4d862222600d45b01545bd242c18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize RigidBody system and register entt hooks.  <br /></td></tr>
<tr class="separator:ac2a4d862222600d45b01545bd242c18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a632e72332e8aacebafe767b13ab76e" id="r_a6a632e72332e8aacebafe767b13ab76e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a6a632e72332e8aacebafe767b13ab76e">InitSoftBodySystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a6a632e72332e8aacebafe767b13ab76e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the soft body system.  <br /></td></tr>
<tr class="separator:a6a632e72332e8aacebafe767b13ab76e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf5a7e97d0af46d08ab2be2f2816b6c" id="r_aaaf5a7e97d0af46d08ab2be2f2816b6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#aaaf5a7e97d0af46d08ab2be2f2816b6c">ShutdownSoftBodySystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:aaaf5a7e97d0af46d08ab2be2f2816b6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown the soft body system.  <br /></td></tr>
<tr class="separator:aaaf5a7e97d0af46d08ab2be2f2816b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b722d87a5f2866a96f8c1f03dedb24" id="r_aa9b722d87a5f2866a96f8c1f03dedb24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#aa9b722d87a5f2866a96f8c1f03dedb24">SyncSoftBodyVertices</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:aa9b722d87a5f2866a96f8c1f03dedb24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize soft body vertex positions to mesh data.  <br /></td></tr>
<tr class="separator:aa9b722d87a5f2866a96f8c1f03dedb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562c8c960c526a8239ba1c2dcbe58157" id="r_a562c8c960c526a8239ba1c2dcbe58157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a562c8c960c526a8239ba1c2dcbe58157">UpdateKinematicVertices</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a562c8c960c526a8239ba1c2dcbe58157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update kinematic vertices for attached soft bodies.  <br /></td></tr>
<tr class="separator:a562c8c960c526a8239ba1c2dcbe58157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9639d532843e8bd34028f2fdff7bc2ee" id="r_a9639d532843e8bd34028f2fdff7bc2ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a9639d532843e8bd34028f2fdff7bc2ee">SyncTransformWithPhysics</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a9639d532843e8bd34028f2fdff7bc2ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize Transform components with Jolt <a class="el" href="../../d8/d54/namespacePhysics.html">Physics</a> body positions.  <br /></td></tr>
<tr class="separator:a9639d532843e8bd34028f2fdff7bc2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d69a9b7dd784930accec40e49d25b60" id="r_a8d69a9b7dd784930accec40e49d25b60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a8d69a9b7dd784930accec40e49d25b60">VehicleControlSystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a8d69a9b7dd784930accec40e49d25b60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply vehicle controller inputs to Jolt vehicle constraints.  <br /></td></tr>
<tr class="separator:a8d69a9b7dd784930accec40e49d25b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590c81e848be50801279af428b810552" id="r_a590c81e848be50801279af428b810552"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a590c81e848be50801279af428b810552">VehicleRPMUpdate</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a590c81e848be50801279af428b810552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update per-vehicle RPM telemetry from Jolt controller. Runs in FixedTimeUpdate.  <br /></td></tr>
<tr class="separator:a590c81e848be50801279af428b810552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6506aa10d93ad0b85ff2d61e61249845" id="r_a6506aa10d93ad0b85ff2d61e61249845"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a6506aa10d93ad0b85ff2d61e61249845">InitVehicleSystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a6506aa10d93ad0b85ff2d61e61249845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the vehicle system with entt lifecycle hooks.  <br /></td></tr>
<tr class="separator:a6506aa10d93ad0b85ff2d61e61249845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604bcdc7aa04408b24b31fde178ac0d3" id="r_a604bcdc7aa04408b24b31fde178ac0d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html#a604bcdc7aa04408b24b31fde178ac0d3">WheelTransformSyncSystem</a> (<a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;core)</td></tr>
<tr class="memdesc:a604bcdc7aa04408b24b31fde178ac0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync wheel entity transforms with Jolt vehicle wheel positions.  <br /></td></tr>
<tr class="separator:a604bcdc7aa04408b24b31fde178ac0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9ff7dce27585ff31c5cdb1e632aa140c" name="a9ff7dce27585ff31c5cdb1e632aa140c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ff7dce27585ff31c5cdb1e632aa140c">&#9670;&#160;</a></span>DestroyConstraint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::DestroyConstraint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html#a92a3143c58cadead136a795f192ee544">Engine::Core::Registry</a> &amp;&#160;</td>
          <td class="paramname"><em>registry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a>&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>constraintName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  112</span>{</div>
<div class="line"><span class="lineno">  113</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *safeName = constraintName ? constraintName : <span class="stringliteral">&quot;&lt;constraint&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  115</span>    {</div>
<div class="line"><span class="lineno">  116</span>        <span class="keyword">auto</span> **corePtr = registry.ctx().find&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;();</div>
<div class="line"><span class="lineno">  117</span>        <span class="keywordflow">if</span> (!corePtr || !*corePtr)</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  119</span>        <span class="keyword">auto</span> &amp;coreRef = **corePtr;</div>
<div class="line"><span class="lineno">  120</span>        <span class="keyword">auto</span> &amp;physicsManagerRef = coreRef.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">if</span> (!physicsManagerRef.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">  123</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>        <span class="keyword">auto</span> *internal = registry.try_get&lt;<a class="code hl_struct" href="../../de/d14/structPhysics_1_1Component_1_1ConstraintInternal.html">Component::ConstraintInternal</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> (!internal || !internal-&gt;IsValid())</div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        <span class="keyword">auto</span> *constraint = internal-&gt;<a class="code hl_variable" href="../../de/d14/structPhysics_1_1Component_1_1ConstraintInternal.html#a0aedc60d858df1db248d82ab57c164ce">constraint</a>;</div>
<div class="line"><span class="lineno">  130</span>        physicsManagerRef.GetPhysicsSystem().RemoveConstraint(constraint);</div>
<div class="line"><span class="lineno">  131</span>        registry.remove&lt;<a class="code hl_struct" href="../../de/d14/structPhysics_1_1Component_1_1ConstraintInternal.html">Component::ConstraintInternal</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a7b4e13507856ddf944bb7786034abeea">Log::Debug</a>(fmt::format(<span class="stringliteral">&quot;Destroyed {} for entity {}&quot;</span>, safeName, entity));</div>
<div class="line"><span class="lineno">  134</span>    }</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d8/d6f/classPhysics_1_1Exception_1_1ConstraintError.html">Physics::Exception::ConstraintError</a> &amp;e)</div>
<div class="line"><span class="lineno">  136</span>    {</div>
<div class="line"><span class="lineno">  137</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a6a482c08dcd9b6b6863152b051323d01">Log::Warn</a>(fmt::format(<span class="stringliteral">&quot;{} destroy constraint error: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">  138</span>    }</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::bad_alloc &amp;e)</div>
<div class="line"><span class="lineno">  140</span>    {</div>
<div class="line"><span class="lineno">  141</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a8315359ae1c60331cbfcb5851fb6ad02">Log::Critical</a>(fmt::format(<span class="stringliteral">&quot;{} destroy memory error: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">  142</span>    }</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e)</div>
<div class="line"><span class="lineno">  144</span>    {</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{} destroy unexpected error: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">  146</span>    }</div>
<div class="line"><span class="lineno">  147</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a></div><div class="ttdef"><b>Definition</b> Core.hpp:24</div></div>
<div class="ttc" id="aclassEngine_1_1Core_html_a29ab23da9acb31dbd5b13fa935754451"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">Engine::Core::GetResource</a></div><div class="ttdeci">TResource &amp; GetResource()</div><div class="ttdef"><b>Definition</b> Core.inl:14</div></div>
<div class="ttc" id="aclassPhysics_1_1Exception_1_1ConstraintError_html"><div class="ttname"><a href="../../d8/d6f/classPhysics_1_1Exception_1_1ConstraintError.html">Physics::Exception::ConstraintError</a></div><div class="ttdoc">Exception thrown when a constraint operation fails.</div><div class="ttdef"><b>Definition</b> ConstraintError.hpp:37</div></div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1PhysicsManager_html"><div class="ttname"><a href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a></div><div class="ttdef"><b>Definition</b> PhysicsManager.hpp:25</div></div>
<div class="ttc" id="anamespaceLog_html_a57f205dd59a28db869b6be0bd2441660"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a></div><div class="ttdeci">void Error(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:21</div></div>
<div class="ttc" id="anamespaceLog_html_a6a482c08dcd9b6b6863152b051323d01"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a6a482c08dcd9b6b6863152b051323d01">Log::Warn</a></div><div class="ttdeci">void Warn(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:19</div></div>
<div class="ttc" id="anamespaceLog_html_a7b4e13507856ddf944bb7786034abeea"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a7b4e13507856ddf944bb7786034abeea">Log::Debug</a></div><div class="ttdeci">void Debug(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:15</div></div>
<div class="ttc" id="anamespaceLog_html_a8315359ae1c60331cbfcb5851fb6ad02"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a8315359ae1c60331cbfcb5851fb6ad02">Log::Critical</a></div><div class="ttdeci">void Critical(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:23</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConstraintInternal_html"><div class="ttname"><a href="../../de/d14/structPhysics_1_1Component_1_1ConstraintInternal.html">Physics::Component::ConstraintInternal</a></div><div class="ttdoc">Internal component storing Jolt Physics constraint data.</div><div class="ttdef"><b>Definition</b> ConstraintInternal.hpp:52</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConstraintInternal_html_a0aedc60d858df1db248d82ab57c164ce"><div class="ttname"><a href="../../de/d14/structPhysics_1_1Component_1_1ConstraintInternal.html#a0aedc60d858df1db248d82ab57c164ce">Physics::Component::ConstraintInternal::constraint</a></div><div class="ttdeci">JPH::Constraint * constraint</div><div class="ttdoc">Pointer to the Jolt constraint object.</div><div class="ttdef"><b>Definition</b> ConstraintInternal.hpp:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76fef0594e67eb13565da21d2cd766e2" name="a76fef0594e67eb13565da21d2cd766e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fef0594e67eb13565da21d2cd766e2">&#9670;&#160;</a></span>FinalizeConstraint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::FinalizeConstraint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html">ConstraintContext</a> &amp;&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a>&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JPH::Constraint *&#160;</td>
          <td class="paramname"><em>joltConstraint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/db3/namespacePhysics_1_1Component.html#adbd3f098c9d4f22544549ab72475347c">Component::ConstraintType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html">Component::ConstraintSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>constraintName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   57</span>{</div>
<div class="line"><span class="lineno">   58</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *safeName = constraintName ? constraintName : <span class="stringliteral">&quot;&lt;constraint&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">if</span> (!joltConstraint)</div>
<div class="line"><span class="lineno">   60</span>    {</div>
<div class="line"><span class="lineno">   61</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{}: Failed to create Jolt constraint&quot;</span>, safeName));</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   63</span>    }</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">   66</span>    {</div>
<div class="line"><span class="lineno">   67</span>        ctx.<a class="code hl_variable" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html#af939a3ea1ba4a09197aa62b993c27eac">physicsSystem</a>.AddConstraint(joltConstraint);</div>
<div class="line"><span class="lineno">   68</span>    }</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d8/d6f/classPhysics_1_1Exception_1_1ConstraintError.html">Physics::Exception::ConstraintError</a> &amp;e)</div>
<div class="line"><span class="lineno">   70</span>    {</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{}: Failed to register constraint: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">   72</span>        joltConstraint-&gt;Release();</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   74</span>    }</div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e)</div>
<div class="line"><span class="lineno">   76</span>    {</div>
<div class="line"><span class="lineno">   77</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{}: Failed to register constraint: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">   78</span>        joltConstraint-&gt;Release();</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">   83</span>    {</div>
<div class="line"><span class="lineno">   84</span>        <span class="keyword">auto</span> *existing = entity.<a class="code hl_function" href="../../da/d6e/classEngine_1_1Entity.html#a9c234a44f74acc04f5c46ba8d61d471c">TryGetComponent</a>&lt;Component::ConstraintInternal&gt;();</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">if</span> (existing)</div>
<div class="line"><span class="lineno">   86</span>        {</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">if</span> (existing-&gt;IsValid())</div>
<div class="line"><span class="lineno">   88</span>                ctx.<a class="code hl_variable" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html#af939a3ea1ba4a09197aa62b993c27eac">physicsSystem</a>.RemoveConstraint(existing-&gt;constraint);</div>
<div class="line"><span class="lineno">   89</span>            entity.<a class="code hl_function" href="../../da/d6e/classEngine_1_1Entity.html#ae29ffec08bec57123c16a045e47a6368">RemoveComponent</a>&lt;Component::ConstraintInternal&gt;();</div>
<div class="line"><span class="lineno">   90</span>        }</div>
<div class="line"><span class="lineno">   91</span>        entity.<a class="code hl_function" href="../../da/d6e/classEngine_1_1Entity.html#a816b3a2c6e9a074c61cfee1b0bcfdfa0">AddComponent</a>&lt;Component::ConstraintInternal&gt;(joltConstraint, type, settings.<a class="code hl_variable" href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html#a78bc61c2034a8887acfdc8052438e09f">breakForce</a>,</div>
<div class="line"><span class="lineno">   92</span>                                                           settings.<a class="code hl_variable" href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html#aa2e01661298ecd7a2b4bfa602e4e7fda">breakTorque</a>);</div>
<div class="line"><span class="lineno">   93</span>    }</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e)</div>
<div class="line"><span class="lineno">   95</span>    {</div>
<div class="line"><span class="lineno">   96</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{}: Failed to store ConstraintInternal: {}&quot;</span>, safeName, e.what()));</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">   98</span>        {</div>
<div class="line"><span class="lineno">   99</span>            ctx.<a class="code hl_variable" href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html#af939a3ea1ba4a09197aa62b993c27eac">physicsSystem</a>.RemoveConstraint(joltConstraint);</div>
<div class="line"><span class="lineno">  100</span>        }</div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">catch</span> (...)</div>
<div class="line"><span class="lineno">  102</span>        {</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span>        joltConstraint-&gt;Release();</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a7b4e13507856ddf944bb7786034abeea">Log::Debug</a>(fmt::format(<span class="stringliteral">&quot;Created {} for entity {}&quot;</span>, safeName, entity));</div>
<div class="line"><span class="lineno">  109</span>}</div>
<div class="ttc" id="aclassEngine_1_1Entity_html_a816b3a2c6e9a074c61cfee1b0bcfdfa0"><div class="ttname"><a href="../../da/d6e/classEngine_1_1Entity.html#a816b3a2c6e9a074c61cfee1b0bcfdfa0">Engine::Entity::AddComponent</a></div><div class="ttdeci">decltype(auto) AddComponent(TComponent &amp;&amp;component)</div><div class="ttdef"><b>Definition</b> Entity.hpp:63</div></div>
<div class="ttc" id="aclassEngine_1_1Entity_html_a9c234a44f74acc04f5c46ba8d61d471c"><div class="ttname"><a href="../../da/d6e/classEngine_1_1Entity.html#a9c234a44f74acc04f5c46ba8d61d471c">Engine::Entity::TryGetComponent</a></div><div class="ttdeci">decltype(auto) TryGetComponent()</div><div class="ttdef"><b>Definition</b> Entity.hpp:163</div></div>
<div class="ttc" id="aclassEngine_1_1Entity_html_ae29ffec08bec57123c16a045e47a6368"><div class="ttname"><a href="../../da/d6e/classEngine_1_1Entity.html#ae29ffec08bec57123c16a045e47a6368">Engine::Entity::RemoveComponent</a></div><div class="ttdeci">void RemoveComponent()</div><div class="ttdef"><b>Definition</b> Entity.hpp:122</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConstraintSettings_html_a78bc61c2034a8887acfdc8052438e09f"><div class="ttname"><a href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html#a78bc61c2034a8887acfdc8052438e09f">Physics::Component::ConstraintSettings::breakForce</a></div><div class="ttdeci">float breakForce</div><div class="ttdoc">Maximum force before constraint breaks (Newtons)</div><div class="ttdef"><b>Definition</b> ConstraintSettings.hpp:96</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConstraintSettings_html_aa2e01661298ecd7a2b4bfa602e4e7fda"><div class="ttname"><a href="../../da/d07/structPhysics_1_1Component_1_1ConstraintSettings.html#aa2e01661298ecd7a2b4bfa602e4e7fda">Physics::Component::ConstraintSettings::breakTorque</a></div><div class="ttdeci">float breakTorque</div><div class="ttdoc">Maximum torque before constraint breaks (Newton-meters)</div><div class="ttdef"><b>Definition</b> ConstraintSettings.hpp:109</div></div>
<div class="ttc" id="astructPhysics_1_1System_1_1ConstraintContext_html_af939a3ea1ba4a09197aa62b993c27eac"><div class="ttname"><a href="../../db/dd7/structPhysics_1_1System_1_1ConstraintContext.html#af939a3ea1ba4a09197aa62b993c27eac">Physics::System::ConstraintContext::physicsSystem</a></div><div class="ttdeci">JPH::PhysicsSystem &amp; physicsSystem</div><div class="ttdef"><b>Definition</b> ConstraintHelpers.hpp:29</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf3759cb69edec7597e9b10dd7233240" name="aaf3759cb69edec7597e9b10dd7233240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3759cb69edec7597e9b10dd7233240">&#9670;&#160;</a></span>GetBodyInternal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Component::RigidBodyInternal</a> * Physics::System::GetBodyInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a>&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>constraintName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bodyName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   43</span>{</div>
<div class="line"><span class="lineno">   44</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *safeName = constraintName ? constraintName : <span class="stringliteral">&quot;&lt;constraint&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">   45</span>    <span class="keyword">auto</span> *internal = entity.<a class="code hl_function" href="../../da/d6e/classEngine_1_1Entity.html#a9c234a44f74acc04f5c46ba8d61d471c">TryGetComponent</a>&lt;<a class="code hl_struct" href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Component::RigidBodyInternal</a>&gt;();</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">if</span> (!internal || !internal-&gt;IsValid())</div>
<div class="line"><span class="lineno">   47</span>    {</div>
<div class="line"><span class="lineno">   48</span>        <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a57f205dd59a28db869b6be0bd2441660">Log::Error</a>(fmt::format(<span class="stringliteral">&quot;{}: {} has no valid RigidBodyInternal&quot;</span>, safeName, bodyName));</div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   50</span>    }</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">return</span> internal;</div>
<div class="line"><span class="lineno">   52</span>}</div>
<div class="ttc" id="astructPhysics_1_1Component_1_1RigidBodyInternal_html"><div class="ttname"><a href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Physics::Component::RigidBodyInternal</a></div><div class="ttdoc">Internal component storing Jolt Physics data.</div><div class="ttdef"><b>Definition</b> RigidBodyInternal.hpp:40</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a39566de928e393d0d0e1007bfef6a9fa" name="a39566de928e393d0d0e1007bfef6a9fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39566de928e393d0d0e1007bfef6a9fa">&#9670;&#160;</a></span>InitConstraintSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitConstraintSystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../d8/d99/_2home_2runner_2work_2EngineSquared_2EngineSquared_2src_2plugin_2physics_2src_2system_2ConstraintSystem_8hpp-example.html#a4">/home/runner/work/EngineSquared/EngineSquared/src/plugin/physics/src/system/ConstraintSystem.hpp</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">if</span> (!registry.ctx().contains&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;())</div>
<div class="line"><span class="lineno">  124</span>        registry.ctx().emplace&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;(&amp;core);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="keyword">struct </span>ConstraintSystemInitializedTag {};</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span> (registry.ctx().contains&lt;ConstraintSystemInitializedTag&gt;())</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  129</span>    registry.ctx().emplace&lt;ConstraintSystemInitializedTag&gt;();</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// Register constraint hooks</span></div>
<div class="line"><span class="lineno">  132</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../d8/db7/structPhysics_1_1Component_1_1FixedConstraint.html">Component::FixedConstraint</a>&gt;().connect&lt;&amp;OnFixedConstraintConstruct&gt;();</div>
<div class="line"><span class="lineno">  133</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../d8/db7/structPhysics_1_1Component_1_1FixedConstraint.html">Component::FixedConstraint</a>&gt;().connect&lt;&amp;OnFixedConstraintDestroy&gt;();</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../d2/d2e/structPhysics_1_1Component_1_1DistanceConstraint.html">Component::DistanceConstraint</a>&gt;().connect&lt;&amp;OnDistanceConstraintConstruct&gt;();</div>
<div class="line"><span class="lineno">  136</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../d2/d2e/structPhysics_1_1Component_1_1DistanceConstraint.html">Component::DistanceConstraint</a>&gt;().connect&lt;&amp;OnDistanceConstraintDestroy&gt;();</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../d2/d00/structPhysics_1_1Component_1_1PointConstraint.html">Component::PointConstraint</a>&gt;().connect&lt;&amp;OnPointConstraintConstruct&gt;();</div>
<div class="line"><span class="lineno">  139</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../d2/d00/structPhysics_1_1Component_1_1PointConstraint.html">Component::PointConstraint</a>&gt;().connect&lt;&amp;OnPointConstraintDestroy&gt;();</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a1423ffcd222d8ec2afefb1c13e9fb3b1">Log::Info</a>(<span class="stringliteral">&quot;ConstraintSystem initialized&quot;</span>);</div>
<div class="line"><span class="lineno">  142</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html_aefea4646026e43c1a8f3317b77ada312"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">Engine::Core::GetRegistry</a></div><div class="ttdeci">Registry &amp; GetRegistry()</div><div class="ttdef"><b>Definition</b> Core.hpp:38</div></div>
<div class="ttc" id="anamespaceLog_html_a1423ffcd222d8ec2afefb1c13e9fb3b1"><div class="ttname"><a href="../../d0/d45/namespaceLog.html#a1423ffcd222d8ec2afefb1c13e9fb3b1">Log::Info</a></div><div class="ttdeci">void Info(const T &amp;msg) noexcept</div><div class="ttdef"><b>Definition</b> Logger.hpp:17</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1DistanceConstraint_html"><div class="ttname"><a href="../../d2/d2e/structPhysics_1_1Component_1_1DistanceConstraint.html">Physics::Component::DistanceConstraint</a></div><div class="ttdef"><b>Definition</b> DistanceConstraint.hpp:80</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1FixedConstraint_html"><div class="ttname"><a href="../../d8/db7/structPhysics_1_1Component_1_1FixedConstraint.html">Physics::Component::FixedConstraint</a></div><div class="ttdef"><b>Definition</b> FixedConstraint.hpp:71</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1PointConstraint_html"><div class="ttname"><a href="../../d2/d00/structPhysics_1_1Component_1_1PointConstraint.html">Physics::Component::PointConstraint</a></div><div class="ttdef"><b>Definition</b> PointConstraint.hpp:76</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bb69f15db8835d5875a535db4cd320a" name="a4bb69f15db8835d5875a535db4cd320a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bb69f15db8835d5875a535db4cd320a">&#9670;&#160;</a></span>InitJoltPhysics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitJoltPhysics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init internal elements needed by JoltPhysics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>core </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To be used with the "Startup" scheduler. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">    7</span>{</div>
<div class="line"><span class="lineno">    8</span>    JPH::RegisterDefaultAllocator();</div>
<div class="line"><span class="lineno">    9</span>    JPH::Factory::sInstance = <span class="keyword">new</span> JPH::Factory();</div>
<div class="line"><span class="lineno">   10</span>    JPH::RegisterTypes();</div>
<div class="line"><span class="lineno">   11</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3ac16a98125641e649aa8060019db69" name="ab3ac16a98125641e649aa8060019db69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ac16a98125641e649aa8060019db69">&#9670;&#160;</a></span>InitPhysicsManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitPhysicsManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init the PhysicsManager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>core </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To be used with the "Startup" scheduler. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">    9</span>{</div>
<div class="line"><span class="lineno">   10</span>    core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#ae9dc85a421d332cdc8020fdf18531149">RegisterResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a>&gt;(<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a>()).Init(core);</div>
<div class="line"><span class="lineno">   11</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html_ae9dc85a421d332cdc8020fdf18531149"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#ae9dc85a421d332cdc8020fdf18531149">Engine::Core::RegisterResource</a></div><div class="ttdeci">TResource &amp; RegisterResource(TResource &amp;&amp;resource)</div><div class="ttdef"><b>Definition</b> Core.inl:9</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2a4d862222600d45b01545bd242c18a" name="ac2a4d862222600d45b01545bd242c18a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a4d862222600d45b01545bd242c18a">&#9670;&#160;</a></span>InitRigidBodySystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitRigidBodySystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize RigidBody system and register entt hooks. </p>
<p>This system sets up the entt hooks for RigidBody component:</p><ul>
<li>on_construct: Creates Jolt body, adds RigidBodyInternal component</li>
<li>on_destroy: Removes Jolt body, cleans up RigidBodyInternal</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>The engine core </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To be used with the "Startup" scheduler </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../d8/d99/_2home_2runner_2work_2EngineSquared_2EngineSquared_2src_2plugin_2physics_2src_2system_2ConstraintSystem_8hpp-example.html#a3">/home/runner/work/EngineSquared/EngineSquared/src/plugin/physics/src/system/ConstraintSystem.hpp</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  371</span>{</div>
<div class="line"><span class="lineno">  372</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>    registry.ctx().emplace&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;(&amp;core);</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../d5/dc5/structPhysics_1_1Component_1_1RigidBody.html">Component::RigidBody</a>&gt;().connect&lt;&amp;OnRigidBodyConstruct&gt;();</div>
<div class="line"><span class="lineno">  377</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../d5/dc5/structPhysics_1_1Component_1_1RigidBody.html">Component::RigidBody</a>&gt;().connect&lt;&amp;OnRigidBodyDestroy&gt;();</div>
<div class="line"><span class="lineno">  378</span>}</div>
<div class="ttc" id="astructPhysics_1_1Component_1_1RigidBody_html"><div class="ttname"><a href="../../d5/dc5/structPhysics_1_1Component_1_1RigidBody.html">Physics::Component::RigidBody</a></div><div class="ttdef"><b>Definition</b> RigidBody.hpp:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a632e72332e8aacebafe767b13ab76e" name="a6a632e72332e8aacebafe767b13ab76e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a632e72332e8aacebafe767b13ab76e">&#9670;&#160;</a></span>InitSoftBodySystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitSoftBodySystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the soft body system. </p>
<p>Registers entt hooks for SoftBody component creation and destruction. Should be called during physics plugin initialization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>Reference to the engine core </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  645</span>{</div>
<div class="line"><span class="lineno">  646</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    <span class="keywordflow">if</span> (!registry.ctx().contains&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;())</div>
<div class="line"><span class="lineno">  649</span>        registry.ctx().emplace&lt;<a class="code hl_class" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> *&gt;(&amp;core);</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>&gt;().connect&lt;&amp;OnSoftBodyConstruct&gt;();</div>
<div class="line"><span class="lineno">  652</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>&gt;().connect&lt;&amp;OnSoftBodyDestroy&gt;();</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>    <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a7b4e13507856ddf944bb7786034abeea">Log::Debug</a>(<span class="stringliteral">&quot;SoftBodySystem initialized&quot;</span>);</div>
<div class="line"><span class="lineno">  655</span>}</div>
<div class="ttc" id="astructPhysics_1_1Component_1_1SoftBody_html"><div class="ttname"><a href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Physics::Component::SoftBody</a></div><div class="ttdoc">Soft body physics component.</div><div class="ttdef"><b>Definition</b> SoftBody.hpp:243</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6506aa10d93ad0b85ff2d61e61249845" name="a6506aa10d93ad0b85ff2d61e61249845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6506aa10d93ad0b85ff2d61e61249845">&#9670;&#160;</a></span>InitVehicleSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::InitVehicleSystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the vehicle system with entt lifecycle hooks. </p>
<p>Registers callbacks for Vehicle component construction and destruction. Must be called during <a class="el" href="../../d1/dfe/namespaceEngine.html">Engine</a> startup (Scheduler::Startup). </p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>{</div>
<div class="line"><span class="lineno">  336</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../de/d2b/structPhysics_1_1Component_1_1Vehicle.html">Component::Vehicle</a>&gt;().connect&lt;&amp;OnVehicleConstruct&gt;();</div>
<div class="line"><span class="lineno">  339</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../de/d2b/structPhysics_1_1Component_1_1Vehicle.html">Component::Vehicle</a>&gt;().connect&lt;&amp;OnVehicleDestroy&gt;();</div>
<div class="line"><span class="lineno">  340</span>}</div>
<div class="ttc" id="astructPhysics_1_1Component_1_1Vehicle_html"><div class="ttname"><a href="../../de/d2b/structPhysics_1_1Component_1_1Vehicle.html">Physics::Component::Vehicle</a></div><div class="ttdoc">Main vehicle component containing all configuration.</div><div class="ttdef"><b>Definition</b> Vehicle.hpp:152</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9845915a4c073e95a895156db7dd69a8" name="a9845915a4c073e95a895156db7dd69a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9845915a4c073e95a895156db7dd69a8">&#9670;&#160;</a></span>PhysicsUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::PhysicsUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies every update of the physics system. </p>
<p>After physics update, flush any buffered contact events from worker threads to the EventManager in the core.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>core </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To be used with the "RelativeTimeUpdate" scheduler. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   12</span>{</div>
<div class="line"><span class="lineno">   13</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Physics::Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">   14</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">   15</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   16</span> </div>
<div class="line"><span class="lineno">   17</span>    <span class="keyword">auto</span> dt = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a413ab272a6ea3b432f75bac975625019">GetScheduler</a>&lt;<a class="code hl_class" href="../../d6/d05/classEngine_1_1Scheduler_1_1FixedTimeUpdate.html">Engine::Scheduler::FixedTimeUpdate</a>&gt;().GetTickRate();</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>    physicsManager.GetPhysicsSystem().Update(dt, physicsManager.GetCollisionSteps(), physicsManager.GetTempAllocator(),</div>
<div class="line"><span class="lineno">   20</span>                                             physicsManager.GetJobSystem());</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> contactListener = physicsManager.GetContactListener())</div>
<div class="line"><span class="lineno">   23</span>        contactListener-&gt;ProcessBufferedEvents(core);</div>
<div class="line"><span class="lineno">   24</span>}</div>
<div class="ttc" id="aclassEngine_1_1Core_html_a413ab272a6ea3b432f75bac975625019"><div class="ttname"><a href="../../d4/d18/classEngine_1_1Core.html#a413ab272a6ea3b432f75bac975625019">Engine::Core::GetScheduler</a></div><div class="ttdeci">TScheduler &amp; GetScheduler()</div><div class="ttdef"><b>Definition</b> Core.inl:47</div></div>
<div class="ttc" id="aclassEngine_1_1Scheduler_1_1FixedTimeUpdate_html"><div class="ttname"><a href="../../d6/d05/classEngine_1_1Scheduler_1_1FixedTimeUpdate.html">Engine::Scheduler::FixedTimeUpdate</a></div><div class="ttdoc">FixedTimeUpdate is a scheduler that runs systems at a fixed rate It is made to only be run a certain ...</div><div class="ttdef"><b>Definition</b> FixedTimeUpdate.hpp:17</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaaf5a7e97d0af46d08ab2be2f2816b6c" name="aaaf5a7e97d0af46d08ab2be2f2816b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf5a7e97d0af46d08ab2be2f2816b6c">&#9670;&#160;</a></span>ShutdownSoftBodySystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::ShutdownSoftBodySystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown the soft body system. </p>
<p>Cleans up any remaining soft bodies.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>Reference to the engine core </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  658</span>{</div>
<div class="line"><span class="lineno">  659</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>    <span class="comment">// Disconnect hooks</span></div>
<div class="line"><span class="lineno">  662</span>    registry.on_construct&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>&gt;().disconnect&lt;&amp;OnSoftBodyConstruct&gt;();</div>
<div class="line"><span class="lineno">  663</span>    registry.on_destroy&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>&gt;().disconnect&lt;&amp;OnSoftBodyDestroy&gt;();</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>    <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a7b4e13507856ddf944bb7786034abeea">Log::Debug</a>(<span class="stringliteral">&quot;SoftBodySystem shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  666</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9b722d87a5f2866a96f8c1f03dedb24" name="aa9b722d87a5f2866a96f8c1f03dedb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b722d87a5f2866a96f8c1f03dedb24">&#9670;&#160;</a></span>SyncSoftBodyVertices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::SyncSoftBodyVertices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize soft body vertex positions to mesh data. </p>
<p>Updates vertex positions from Jolt soft body simulation. Should be called after physics update.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>Reference to the engine core </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  669</span>{</div>
<div class="line"><span class="lineno">  670</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">  673</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">  674</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>    <span class="keyword">auto</span> &amp;bodyInterface = physicsManager.<a class="code hl_function" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a69e2a4295378da5f21123526d2ba3155">GetBodyInterface</a>();</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>    <span class="comment">// Update vertex positions from Jolt simulation</span></div>
<div class="line"><span class="lineno">  679</span>    <span class="keyword">auto</span> view = registry.view&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>, <a class="code hl_struct" href="../../d8/da2/structPhysics_1_1Component_1_1SoftBodyInternal.html">Component::SoftBodyInternal</a>&gt;();</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> entity : view)</div>
<div class="line"><span class="lineno">  682</span>    {</div>
<div class="line"><span class="lineno">  683</span>        <span class="keyword">auto</span> &amp;internal = view.get&lt;<a class="code hl_struct" href="../../d8/da2/structPhysics_1_1Component_1_1SoftBodyInternal.html">Component::SoftBodyInternal</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>        <span class="keywordflow">if</span> (!internal.IsValid())</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>        <span class="comment">// Get soft body motion properties</span></div>
<div class="line"><span class="lineno">  689</span>        JPH::BodyLockRead lock(physicsManager.GetPhysicsSystem().GetBodyLockInterface(), internal.bodyID);</div>
<div class="line"><span class="lineno">  690</span>        <span class="keywordflow">if</span> (!lock.Succeeded())</div>
<div class="line"><span class="lineno">  691</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>        <span class="keyword">const</span> JPH::Body &amp;body = lock.GetBody();</div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">if</span> (!body.IsSoftBody())</div>
<div class="line"><span class="lineno">  695</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>        <span class="keyword">const</span> JPH::SoftBodyMotionProperties *motionProps =</div>
<div class="line"><span class="lineno">  698</span>            <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>JPH::SoftBodyMotionProperties *<span class="keyword">&gt;</span>(body.GetMotionProperties());</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>        <span class="comment">// Get body center of mass in world space</span></div>
<div class="line"><span class="lineno">  701</span>        JPH::RVec3 bodyPosition = body.GetCenterOfMassPosition();</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>        <span class="comment">// Update vertex positions (vertices are in local space relative to body center of mass)</span></div>
<div class="line"><span class="lineno">  704</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;joltVertices = motionProps-&gt;GetVertices();</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>        <span class="comment">// Write to Mesh.vertices (used by graphics plugin for rendering)</span></div>
<div class="line"><span class="lineno">  707</span>        <span class="keyword">auto</span> *mesh = registry.try_get&lt;<a class="code hl_struct" href="../../d6/db7/structObject_1_1Component_1_1Mesh.html">Object::Component::Mesh</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  708</span>        <span class="keywordflow">if</span> (!mesh || mesh-&gt;GetVertices().empty())</div>
<div class="line"><span class="lineno">  709</span>        {</div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *convexHullMesh = registry.try_get&lt;<a class="code hl_struct" href="../../d6/d19/structPhysics_1_1Component_1_1ConvexHullMeshCollider.html">Component::ConvexHullMeshCollider</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  711</span>                convexHullMesh &amp;&amp; convexHullMesh-&gt;<a class="code hl_variable" href="../../d6/d19/structPhysics_1_1Component_1_1ConvexHullMeshCollider.html#ac2d84d4220da2274e1662a1f309bc977">mesh</a> &amp;&amp; !convexHullMesh-&gt;mesh-&gt;GetVertices().empty())</div>
<div class="line"><span class="lineno">  712</span>            {</div>
<div class="line"><span class="lineno">  713</span>                mesh = &amp;(convexHullMesh-&gt;mesh.value());</div>
<div class="line"><span class="lineno">  714</span>                <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a6a482c08dcd9b6b6863152b051323d01">Log::Warn</a>(<span class="stringliteral">&quot;SoftBody: Using ConvexHullMeshCollider mesh as geometry for SoftBody&quot;</span>);</div>
<div class="line"><span class="lineno">  715</span>            }</div>
<div class="line"><span class="lineno">  716</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *meshCollider = registry.try_get&lt;<a class="code hl_struct" href="../../d0/d3b/structPhysics_1_1Component_1_1MeshCollider.html">Component::MeshCollider</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  717</span>                     meshCollider &amp;&amp; meshCollider-&gt;mesh &amp;&amp; !meshCollider-&gt;mesh-&gt;GetVertices().empty())</div>
<div class="line"><span class="lineno">  718</span>            {</div>
<div class="line"><span class="lineno">  719</span>                mesh = &amp;(meshCollider-&gt;mesh.value());</div>
<div class="line"><span class="lineno">  720</span>                <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a6a482c08dcd9b6b6863152b051323d01">Log::Warn</a>(<span class="stringliteral">&quot;SoftBody: Using MeshCollider mesh as geometry for SoftBody&quot;</span>);</div>
<div class="line"><span class="lineno">  721</span>            }</div>
<div class="line"><span class="lineno">  722</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  723</span>            {</div>
<div class="line"><span class="lineno">  724</span>                <a class="code hl_function" href="../../d0/d45/namespaceLog.html#a6a482c08dcd9b6b6863152b051323d01">Log::Warn</a>(<span class="stringliteral">&quot;SoftBody: No Mesh component found during sync. Skipping vertex update.&quot;</span>);</div>
<div class="line"><span class="lineno">  725</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  726</span>            }</div>
<div class="line"><span class="lineno">  727</span>        }</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>        <span class="comment">// Update Transform with center of mass position (like RigidBody sync)</span></div>
<div class="line"><span class="lineno">  730</span>        <span class="comment">// This way the GPU applies the Transform, and vertices stay in local space</span></div>
<div class="line"><span class="lineno">  731</span>        <span class="comment">// EXCEPTION: If attached to another body, don&#39;t override Transform - it follows the parent</span></div>
<div class="line"><span class="lineno">  732</span>        <span class="keyword">auto</span> *transform = registry.try_get&lt;<a class="code hl_struct" href="../../d6/d4d/structObject_1_1Component_1_1Transform.html">Object::Component::Transform</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>        <span class="comment">// For attached softbodies, we need the parent transform to convert world vertices to local</span></div>
<div class="line"><span class="lineno">  735</span>        JPH::RVec3 parentPos = JPH::RVec3::sZero();</div>
<div class="line"><span class="lineno">  736</span>        JPH::Quat parentRot = JPH::Quat::sIdentity();</div>
<div class="line"><span class="lineno">  737</span>        <span class="keywordtype">bool</span> isAttached = !internal.attachedToBodyID.IsInvalid();</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>        <span class="keywordflow">if</span> (transform &amp;&amp; isAttached)</div>
<div class="line"><span class="lineno">  740</span>        {</div>
<div class="line"><span class="lineno">  741</span>            <span class="comment">// Softbody is attached - get the parent body&#39;s transform</span></div>
<div class="line"><span class="lineno">  742</span>            JPH::BodyLockRead parentLock(physicsManager.GetPhysicsSystem().GetBodyLockInterface(),</div>
<div class="line"><span class="lineno">  743</span>                                         internal.attachedToBodyID);</div>
<div class="line"><span class="lineno">  744</span>            <span class="keywordflow">if</span> (parentLock.Succeeded())</div>
<div class="line"><span class="lineno">  745</span>            {</div>
<div class="line"><span class="lineno">  746</span>                <span class="keyword">const</span> JPH::Body &amp;parentBody = parentLock.GetBody();</div>
<div class="line"><span class="lineno">  747</span>                parentPos = parentBody.GetCenterOfMassPosition();</div>
<div class="line"><span class="lineno">  748</span>                parentRot = parentBody.GetRotation();</div>
<div class="line"><span class="lineno">  749</span>                transform-&gt;SetPosition(Utils::FromJoltRVec3(parentPos));</div>
<div class="line"><span class="lineno">  750</span>                transform-&gt;SetRotation(Utils::FromJoltQuat(parentRot));</div>
<div class="line"><span class="lineno">  751</span>            }</div>
<div class="line"><span class="lineno">  752</span>        }</div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transform)</div>
<div class="line"><span class="lineno">  754</span>        {</div>
<div class="line"><span class="lineno">  755</span>            <span class="comment">// Standard softbody - use its own center of mass</span></div>
<div class="line"><span class="lineno">  756</span>            transform-&gt;SetPosition(Utils::FromJoltRVec3(bodyPosition));</div>
<div class="line"><span class="lineno">  757</span>            <span class="comment">// Note: Soft bodies don&#39;t have a single rotation, so we leave it as-is</span></div>
<div class="line"><span class="lineno">  758</span>        }</div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>        <span class="comment">// Use the vertex map to sync deduplicated Jolt vertices back to the original mesh</span></div>
<div class="line"><span class="lineno">  761</span>        <span class="comment">// Jolt vertices are in WORLD scale (scaled by initialScale during creation)</span></div>
<div class="line"><span class="lineno">  762</span>        <span class="comment">// We need to convert back to LOCAL mesh space by dividing by initialScale</span></div>
<div class="line"><span class="lineno">  763</span>        <span class="comment">// Then the GPU will apply Transform.scale (which should match initialScale)</span></div>
<div class="line"><span class="lineno">  764</span>        <span class="comment">// Prevent division by zero - use small epsilon for safety</span></div>
<div class="line"><span class="lineno">  765</span>        <span class="keyword">constexpr</span> <span class="keywordtype">float</span> epsilon = 1e-6f;</div>
<div class="line"><span class="lineno">  766</span>        glm::vec3 safeScale = glm::max(glm::abs(internal.initialScale), glm::vec3(epsilon));</div>
<div class="line"><span class="lineno">  767</span>        <span class="comment">// Preserve sign from original scale (treat zero as positive)</span></div>
<div class="line"><span class="lineno">  768</span>        <span class="keyword">auto</span> signOrOne = [](<span class="keywordtype">float</span> v) { <span class="keywordflow">return</span> v &lt; 0.0f ? -1.0f : 1.0f; };</div>
<div class="line"><span class="lineno">  769</span>        safeScale *= glm::vec3(signOrOne(internal.initialScale.x), signOrOne(internal.initialScale.y),</div>
<div class="line"><span class="lineno">  770</span>                               signOrOne(internal.initialScale.z));</div>
<div class="line"><span class="lineno">  771</span>        <span class="keyword">const</span> glm::vec3 invScale = glm::vec3(1.0f) / safeScale;</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>        <span class="comment">// For attached softbodies: convert world positions to parent-local space</span></div>
<div class="line"><span class="lineno">  774</span>        <span class="comment">// The GPU will then apply the parent&#39;s transform, giving us world positions</span></div>
<div class="line"><span class="lineno">  775</span>        JPH::Quat invParentRot = isAttached ? parentRot.Conjugated() : JPH::Quat::sIdentity();</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">if</span> (!internal.vertexMap.empty())</div>
<div class="line"><span class="lineno">  778</span>        {</div>
<div class="line"><span class="lineno">  779</span>            <span class="comment">// Use vertex map: original mesh vertices are mapped to deduplicated Jolt vertices</span></div>
<div class="line"><span class="lineno">  780</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> origIdx = 0u; origIdx &lt; mesh-&gt;GetVertices().size() &amp;&amp; origIdx &lt; internal.vertexMap.size();</div>
<div class="line"><span class="lineno">  781</span>                 ++origIdx)</div>
<div class="line"><span class="lineno">  782</span>            {</div>
<div class="line"><span class="lineno">  783</span>                uint32_t joltIdx = internal.vertexMap[origIdx];</div>
<div class="line"><span class="lineno">  784</span>                <span class="keywordflow">if</span> (joltIdx &lt; joltVertices.size())</div>
<div class="line"><span class="lineno">  785</span>                {</div>
<div class="line"><span class="lineno">  786</span>                    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v = joltVertices[joltIdx];</div>
<div class="line"><span class="lineno">  787</span>                    <span class="comment">// Get world position from Jolt</span></div>
<div class="line"><span class="lineno">  788</span>                    JPH::Vec3 worldPos(v.mPosition.GetX(), v.mPosition.GetY(), v.mPosition.GetZ());</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>                    <span class="keywordflow">if</span> (isAttached)</div>
<div class="line"><span class="lineno">  791</span>                    {</div>
<div class="line"><span class="lineno">  792</span>                        <span class="comment">// Convert from world space to parent-local space</span></div>
<div class="line"><span class="lineno">  793</span>                        <span class="comment">// 1. Subtract parent position to get offset from parent</span></div>
<div class="line"><span class="lineno">  794</span>                        <span class="comment">// 2. Rotate by inverse parent rotation to get local offset</span></div>
<div class="line"><span class="lineno">  795</span>                        JPH::Vec3 localOffset = invParentRot * (worldPos - JPH::Vec3(parentPos));</div>
<div class="line"><span class="lineno">  796</span>                        mesh-&gt;SetVertexAt(</div>
<div class="line"><span class="lineno">  797</span>                            origIdx, glm::vec3(localOffset.GetX(), localOffset.GetY(), localOffset.GetZ()) * invScale);</div>
<div class="line"><span class="lineno">  798</span>                    }</div>
<div class="line"><span class="lineno">  799</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  800</span>                    {</div>
<div class="line"><span class="lineno">  801</span>                        <span class="comment">// Standard: just apply inverse scale</span></div>
<div class="line"><span class="lineno">  802</span>                        mesh-&gt;SetVertexAt(origIdx,</div>
<div class="line"><span class="lineno">  803</span>                                          glm::vec3(worldPos.GetX(), worldPos.GetY(), worldPos.GetZ()) * invScale);</div>
<div class="line"><span class="lineno">  804</span>                    }</div>
<div class="line"><span class="lineno">  805</span>                }</div>
<div class="line"><span class="lineno">  806</span>            }</div>
<div class="line"><span class="lineno">  807</span>        }</div>
<div class="line"><span class="lineno">  808</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  809</span>        {</div>
<div class="line"><span class="lineno">  810</span>            <span class="comment">// Fallback: direct 1:1 mapping (for procedurally generated meshes)</span></div>
<div class="line"><span class="lineno">  811</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0u; i &lt; joltVertices.size() &amp;&amp; i &lt; mesh-&gt;GetVertices().size(); ++i)</div>
<div class="line"><span class="lineno">  812</span>            {</div>
<div class="line"><span class="lineno">  813</span>                <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v = joltVertices[i];</div>
<div class="line"><span class="lineno">  814</span>                JPH::Vec3 worldPos(v.mPosition.GetX(), v.mPosition.GetY(), v.mPosition.GetZ());</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>                <span class="keywordflow">if</span> (isAttached)</div>
<div class="line"><span class="lineno">  817</span>                {</div>
<div class="line"><span class="lineno">  818</span>                    JPH::Vec3 localOffset = invParentRot * (worldPos - JPH::Vec3(parentPos));</div>
<div class="line"><span class="lineno">  819</span>                    mesh-&gt;SetVertexAt(i,</div>
<div class="line"><span class="lineno">  820</span>                                      glm::vec3(localOffset.GetX(), localOffset.GetY(), localOffset.GetZ()) * invScale);</div>
<div class="line"><span class="lineno">  821</span>                }</div>
<div class="line"><span class="lineno">  822</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  823</span>                {</div>
<div class="line"><span class="lineno">  824</span>                    mesh-&gt;SetVertexAt(i, glm::vec3(worldPos.GetX(), worldPos.GetY(), worldPos.GetZ()) * invScale);</div>
<div class="line"><span class="lineno">  825</span>                }</div>
<div class="line"><span class="lineno">  826</span>            }</div>
<div class="line"><span class="lineno">  827</span>        }</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>        <span class="comment">// Recalculate normals for correct lighting on deformed soft bodies</span></div>
<div class="line"><span class="lineno">  830</span>        <a class="code hl_function" href="../../d0/d5d/namespaceObject_1_1Utils.html#a7477219f06796f6c77928590f05c00ad">Object::Utils::RecalculateNormals</a>(*mesh);</div>
<div class="line"><span class="lineno">  831</span>    }</div>
<div class="line"><span class="lineno">  832</span>}</div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1PhysicsManager_html_a69e2a4295378da5f21123526d2ba3155"><div class="ttname"><a href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a69e2a4295378da5f21123526d2ba3155">Physics::Resource::PhysicsManager::GetBodyInterface</a></div><div class="ttdeci">JPH::BodyInterface &amp; GetBodyInterface()</div><div class="ttdoc">Get a reference to the body interface for manipulating bodies.</div><div class="ttdef"><b>Definition</b> PhysicsManager.hpp:59</div></div>
<div class="ttc" id="anamespaceObject_1_1Utils_html_a7477219f06796f6c77928590f05c00ad"><div class="ttname"><a href="../../d0/d5d/namespaceObject_1_1Utils.html#a7477219f06796f6c77928590f05c00ad">Object::Utils::RecalculateNormals</a></div><div class="ttdeci">void RecalculateNormals(Component::Mesh &amp;mesh)</div><div class="ttdoc">Recalculate normals for a mesh based on face geometry.</div><div class="ttdef"><b>Definition</b> MeshUtils.cpp:41</div></div>
<div class="ttc" id="astructObject_1_1Component_1_1Mesh_html"><div class="ttname"><a href="../../d6/db7/structObject_1_1Component_1_1Mesh.html">Object::Component::Mesh</a></div><div class="ttdoc">Mesh structure.</div><div class="ttdef"><b>Definition</b> Mesh.hpp:40</div></div>
<div class="ttc" id="astructObject_1_1Component_1_1Transform_html"><div class="ttname"><a href="../../d6/d4d/structObject_1_1Component_1_1Transform.html">Object::Component::Transform</a></div><div class="ttdef"><b>Definition</b> Transform.hpp:18</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConvexHullMeshCollider_html"><div class="ttname"><a href="../../d6/d19/structPhysics_1_1Component_1_1ConvexHullMeshCollider.html">Physics::Component::ConvexHullMeshCollider</a></div><div class="ttdoc">Convex hull mesh collider.</div><div class="ttdef"><b>Definition</b> ConvexHullMeshCollider.hpp:48</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1ConvexHullMeshCollider_html_ac2d84d4220da2274e1662a1f309bc977"><div class="ttname"><a href="../../d6/d19/structPhysics_1_1Component_1_1ConvexHullMeshCollider.html#ac2d84d4220da2274e1662a1f309bc977">Physics::Component::ConvexHullMeshCollider::mesh</a></div><div class="ttdeci">std::optional&lt; Object::Component::Mesh &gt; mesh</div><div class="ttdoc">Optional embedded mesh data for collision (avoids needing entity Mesh component)</div><div class="ttdef"><b>Definition</b> ConvexHullMeshCollider.hpp:54</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1MeshCollider_html"><div class="ttname"><a href="../../d0/d3b/structPhysics_1_1Component_1_1MeshCollider.html">Physics::Component::MeshCollider</a></div><div class="ttdoc">Triangle mesh collider (concave mesh support)</div><div class="ttdef"><b>Definition</b> MeshCollider.hpp:47</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1SoftBodyInternal_html"><div class="ttname"><a href="../../d8/da2/structPhysics_1_1Component_1_1SoftBodyInternal.html">Physics::Component::SoftBodyInternal</a></div><div class="ttdoc">Internal component storing Jolt soft body reference.</div><div class="ttdef"><b>Definition</b> SoftBodyInternal.hpp:42</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9639d532843e8bd34028f2fdff7bc2ee" name="a9639d532843e8bd34028f2fdff7bc2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9639d532843e8bd34028f2fdff7bc2ee">&#9670;&#160;</a></span>SyncTransformWithPhysics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::SyncTransformWithPhysics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize Transform components with Jolt <a class="el" href="../../d8/d54/namespacePhysics.html">Physics</a> body positions. </p>
<p>This system should run in the FixedTimeUpdate scheduler AFTER PhysicsUpdate. It reads the position and rotation from Jolt bodies and updates the corresponding Transform components.</p>
<p>Only dynamic and kinematic bodies are synchronized (static bodies don't move).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>The engine core </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To be used with the "FixedTimeUpdate" scheduler </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   18</span>{</div>
<div class="line"><span class="lineno">   19</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">   22</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>    <span class="keyword">auto</span> &amp;bodyInterface = physicsManager.<a class="code hl_function" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a69e2a4295378da5f21123526d2ba3155">GetBodyInterface</a>();</div>
<div class="line"><span class="lineno">   25</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>    <span class="keyword">auto</span> view = registry.view&lt;<a class="code hl_struct" href="../../d5/dc5/structPhysics_1_1Component_1_1RigidBody.html">Component::RigidBody</a>, <a class="code hl_struct" href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Component::RigidBodyInternal</a>, <a class="code hl_struct" href="../../d6/d4d/structObject_1_1Component_1_1Transform.html">Object::Component::Transform</a>&gt;();</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> entity : view)</div>
<div class="line"><span class="lineno">   30</span>    {</div>
<div class="line"><span class="lineno">   31</span>        <span class="keyword">auto</span> &amp;rigidBody = view.get&lt;<a class="code hl_struct" href="../../d5/dc5/structPhysics_1_1Component_1_1RigidBody.html">Component::RigidBody</a>&gt;(entity);</div>
<div class="line"><span class="lineno">   32</span>        <span class="keyword">auto</span> &amp;internal = view.get&lt;<a class="code hl_struct" href="../../d8/d97/structPhysics_1_1Component_1_1RigidBodyInternal.html">Component::RigidBodyInternal</a>&gt;(entity);</div>
<div class="line"><span class="lineno">   33</span>        <span class="keyword">auto</span> &amp;transform = view.get&lt;<a class="code hl_struct" href="../../d6/d4d/structObject_1_1Component_1_1Transform.html">Object::Component::Transform</a>&gt;(entity);</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>        <span class="keywordflow">if</span> (rigidBody.motionType == Component::MotionType::Static)</div>
<div class="line"><span class="lineno">   36</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">if</span> (!internal.IsValid())</div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>        JPH::RVec3 joltPosition = bodyInterface.GetCenterOfMassPosition(internal.bodyID);</div>
<div class="line"><span class="lineno">   42</span>        JPH::Quat joltRotation = bodyInterface.<a class="code hl_function" href="../../d6/d4d/structObject_1_1Component_1_1Transform.html#ab6b00b5720a1c6e183b29924727db165">GetRotation</a>(internal.bodyID);</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>        transform.SetPosition(Utils::FromJoltRVec3(joltPosition));</div>
<div class="line"><span class="lineno">   45</span>        transform.SetRotation(Utils::FromJoltQuat(joltRotation));</div>
<div class="line"><span class="lineno">   46</span>    }</div>
<div class="line"><span class="lineno">   47</span>}</div>
<div class="ttc" id="astructObject_1_1Component_1_1Transform_html_ab6b00b5720a1c6e183b29924727db165"><div class="ttname"><a href="../../d6/d4d/structObject_1_1Component_1_1Transform.html#ab6b00b5720a1c6e183b29924727db165">Object::Component::Transform::GetRotation</a></div><div class="ttdeci">const glm::quat &amp; GetRotation() const</div><div class="ttdef"><b>Definition</b> Transform.hpp:39</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a562c8c960c526a8239ba1c2dcbe58157" name="a562c8c960c526a8239ba1c2dcbe58157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a562c8c960c526a8239ba1c2dcbe58157">&#9670;&#160;</a></span>UpdateKinematicVertices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::UpdateKinematicVertices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update kinematic vertices for attached soft bodies. </p>
<p>Moves kinematic vertices to follow their parent rigid body's transform. Should be called BEFORE physics update (before PhysicsSystem::Update).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>Reference to the engine core </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  835</span>{</div>
<div class="line"><span class="lineno">  836</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">  839</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">  840</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>    <span class="keyword">auto</span> &amp;bodyInterface = physicsManager.<a class="code hl_function" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a69e2a4295378da5f21123526d2ba3155">GetBodyInterface</a>();</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>    <span class="comment">// Update kinematic vertex positions for attached soft bodies</span></div>
<div class="line"><span class="lineno">  845</span>    <span class="keyword">auto</span> view = registry.view&lt;<a class="code hl_struct" href="../../de/d89/structPhysics_1_1Component_1_1SoftBody.html">Component::SoftBody</a>, <a class="code hl_struct" href="../../d8/da2/structPhysics_1_1Component_1_1SoftBodyInternal.html">Component::SoftBodyInternal</a>&gt;();</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> entity : view)</div>
<div class="line"><span class="lineno">  848</span>    {</div>
<div class="line"><span class="lineno">  849</span>        <span class="keyword">auto</span> &amp;internal = view.get&lt;<a class="code hl_struct" href="../../d8/da2/structPhysics_1_1Component_1_1SoftBodyInternal.html">Component::SoftBodyInternal</a>&gt;(entity);</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>        <span class="keywordflow">if</span> (!internal.IsValid())</div>
<div class="line"><span class="lineno">  852</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>        <span class="comment">// Skip if not attached to any body</span></div>
<div class="line"><span class="lineno">  855</span>        <span class="keywordflow">if</span> (internal.attachedToBodyID.IsInvalid() || internal.kinematicVertexIndices.empty())</div>
<div class="line"><span class="lineno">  856</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>        <span class="comment">// Get the parent body&#39;s current transform</span></div>
<div class="line"><span class="lineno">  859</span>        JPH::BodyLockRead parentLock(physicsManager.GetPhysicsSystem().GetBodyLockInterface(),</div>
<div class="line"><span class="lineno">  860</span>                                     internal.attachedToBodyID);</div>
<div class="line"><span class="lineno">  861</span>        <span class="keywordflow">if</span> (!parentLock.Succeeded())</div>
<div class="line"><span class="lineno">  862</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>        <span class="keyword">const</span> JPH::Body &amp;parentBody = parentLock.GetBody();</div>
<div class="line"><span class="lineno">  865</span>        JPH::RVec3 parentPos = parentBody.GetCenterOfMassPosition();</div>
<div class="line"><span class="lineno">  866</span>        JPH::Quat parentRot = parentBody.GetRotation();</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>        <span class="comment">// Get writable access to soft body</span></div>
<div class="line"><span class="lineno">  869</span>        JPH::BodyLockWrite softLock(physicsManager.GetPhysicsSystem().GetBodyLockInterface(), internal.bodyID);</div>
<div class="line"><span class="lineno">  870</span>        <span class="keywordflow">if</span> (!softLock.Succeeded())</div>
<div class="line"><span class="lineno">  871</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  872</span> </div>
<div class="line"><span class="lineno">  873</span>        JPH::Body &amp;softBody = softLock.GetBody();</div>
<div class="line"><span class="lineno">  874</span>        <span class="keywordflow">if</span> (!softBody.IsSoftBody())</div>
<div class="line"><span class="lineno">  875</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>        JPH::SoftBodyMotionProperties *motionProps =</div>
<div class="line"><span class="lineno">  878</span>            <span class="keyword">static_cast&lt;</span>JPH::SoftBodyMotionProperties *<span class="keyword">&gt;</span>(softBody.GetMotionPropertiesUnchecked());</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>        <span class="comment">// Get mutable vertices</span></div>
<div class="line"><span class="lineno">  881</span>        JPH::Array&lt;JPH::SoftBodyMotionProperties::Vertex&gt; &amp;vertices = motionProps-&gt;GetVertices();</div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>        <span class="comment">// Update each kinematic vertex position based on parent transform</span></div>
<div class="line"><span class="lineno">  884</span>        <span class="comment">// The local positions are stored in the softbody&#39;s local coordinate system (mesh space)</span></div>
<div class="line"><span class="lineno">  885</span>        <span class="comment">// We rotate them by parent rotation and translate by parent position</span></div>
<div class="line"><span class="lineno">  886</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0;</div>
<div class="line"><span class="lineno">  887</span>             i &lt; internal.kinematicVertexIndices.size() &amp;&amp; i &lt; internal.kinematicVertexLocalPositions.size(); ++i)</div>
<div class="line"><span class="lineno">  888</span>        {</div>
<div class="line"><span class="lineno">  889</span>            uint32_t joltIdx = internal.kinematicVertexIndices[i];</div>
<div class="line"><span class="lineno">  890</span>            <span class="keywordflow">if</span> (joltIdx &gt;= vertices.size())</div>
<div class="line"><span class="lineno">  891</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>            <span class="comment">// Get the local offset from softbody origin</span></div>
<div class="line"><span class="lineno">  894</span>            <span class="keyword">const</span> glm::vec3 &amp;localOffset = internal.kinematicVertexLocalPositions[i];</div>
<div class="line"><span class="lineno">  895</span>            JPH::Vec3 joltLocalOffset(localOffset.x, localOffset.y, localOffset.z);</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>            <span class="comment">// Rotate the local offset by parent rotation, then add parent position</span></div>
<div class="line"><span class="lineno">  898</span>            JPH::Vec3 rotatedOffset = parentRot * joltLocalOffset;</div>
<div class="line"><span class="lineno">  899</span>            JPH::RVec3 worldPos = parentPos + rotatedOffset;</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>            <span class="comment">// Update vertex position (kinematic vertices have invMass = 0, so they won&#39;t be affected by physics)</span></div>
<div class="line"><span class="lineno">  902</span>            vertices[joltIdx].mPosition = JPH::Vec3(worldPos);</div>
<div class="line"><span class="lineno">  903</span>            vertices[joltIdx].mVelocity = JPH::Vec3::sZero(); <span class="comment">// Reset velocity for kinematic vertices</span></div>
<div class="line"><span class="lineno">  904</span>        }</div>
<div class="line"><span class="lineno">  905</span>    }</div>
<div class="line"><span class="lineno">  906</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d69a9b7dd784930accec40e49d25b60" name="a8d69a9b7dd784930accec40e49d25b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d69a9b7dd784930accec40e49d25b60">&#9670;&#160;</a></span>VehicleControlSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::VehicleControlSystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply vehicle controller inputs to Jolt vehicle constraints. </p>
<p>Should run every physics tick (FixedTimeUpdate scheduler). Reads VehicleController component values and applies them to the WheeledVehicleController. </p>
<div class="fragment"><div class="line"><span class="lineno">   15</span>{</div>
<div class="line"><span class="lineno">   16</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">   17</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">   20</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>    <span class="keyword">auto</span> &amp;bodyInterface = physicsManager.<a class="code hl_function" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a72908afd09166411413362426a5ce745">GetPhysicsSystem</a>().GetBodyInterface();</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>    registry.view&lt;<a class="code hl_struct" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html">Component::VehicleController</a>, <a class="code hl_struct" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Component::VehicleInternal</a>&gt;().each(</div>
<div class="line"><span class="lineno">   25</span>        [&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html">Component::VehicleController</a> &amp;controller, <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Component::VehicleInternal</a> &amp;internal) {</div>
<div class="line"><span class="lineno">   26</span>            <span class="keywordflow">if</span> (!internal.<a class="code hl_function" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#ac3ea77cbf9ee3c94d220c846a9db1291">IsValid</a>())</div>
<div class="line"><span class="lineno">   27</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>            <span class="keyword">auto</span> *wheeledController =</div>
<div class="line"><span class="lineno">   30</span>                <span class="keyword">static_cast&lt;</span>JPH::WheeledVehicleController *<span class="keyword">&gt;</span>(internal.<a class="code hl_variable" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#aa0e3dfd8489cffe28aef8678dcc4c5de">vehicleConstraint</a>-&gt;GetController());</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>            wheeledController-&gt;SetDriverInput(controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a6a25e122722f8489a8aea24903e28e40">forwardInput</a>, controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a818ff3ec8a26a1e4820e6337f49f684c">steeringInput</a>, controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a26c426d424488f79b133fd841b248061">brakeInput</a>,</div>
<div class="line"><span class="lineno">   33</span>                                              controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#af8b0e831337719f0e7653248573a8b9c">handBrakeInput</a>);</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>            <span class="keywordflow">if</span> (controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a6a25e122722f8489a8aea24903e28e40">forwardInput</a> != 0.0f || controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a818ff3ec8a26a1e4820e6337f49f684c">steeringInput</a> != 0.0f || controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a26c426d424488f79b133fd841b248061">brakeInput</a> != 0.0f ||</div>
<div class="line"><span class="lineno">   36</span>                controller.<a class="code hl_variable" href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#af8b0e831337719f0e7653248573a8b9c">handBrakeInput</a> != 0.0f)</div>
<div class="line"><span class="lineno">   37</span>            {</div>
<div class="line"><span class="lineno">   38</span>                bodyInterface.ActivateBody(internal.<a class="code hl_variable" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#a80cbef2be9391bf7e507d22d903fddbf">chassisBodyID</a>);</div>
<div class="line"><span class="lineno">   39</span>            }</div>
<div class="line"><span class="lineno">   40</span>        });</div>
<div class="line"><span class="lineno">   41</span>}</div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1PhysicsManager_html_a72908afd09166411413362426a5ce745"><div class="ttname"><a href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html#a72908afd09166411413362426a5ce745">Physics::Resource::PhysicsManager::GetPhysicsSystem</a></div><div class="ttdeci">JPH::PhysicsSystem &amp; GetPhysicsSystem()</div><div class="ttdoc">Get a reference to the physics system.</div><div class="ttdef"><b>Definition</b> PhysicsManager.hpp:51</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleController_html"><div class="ttname"><a href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html">Physics::Component::VehicleController</a></div><div class="ttdoc">Vehicle input controller component.</div><div class="ttdef"><b>Definition</b> VehicleController.hpp:14</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleController_html_a26c426d424488f79b133fd841b248061"><div class="ttname"><a href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a26c426d424488f79b133fd841b248061">Physics::Component::VehicleController::brakeInput</a></div><div class="ttdeci">float brakeInput</div><div class="ttdoc">Brake input (0.0 = no brake, 1.0 = full brake)</div><div class="ttdef"><b>Definition</b> VehicleController.hpp:22</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleController_html_a6a25e122722f8489a8aea24903e28e40"><div class="ttname"><a href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a6a25e122722f8489a8aea24903e28e40">Physics::Component::VehicleController::forwardInput</a></div><div class="ttdeci">float forwardInput</div><div class="ttdoc">Forward/backward input (-1.0 = full brake/reverse, 0.0 = neutral, 1.0 = full throttle)</div><div class="ttdef"><b>Definition</b> VehicleController.hpp:16</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleController_html_a818ff3ec8a26a1e4820e6337f49f684c"><div class="ttname"><a href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#a818ff3ec8a26a1e4820e6337f49f684c">Physics::Component::VehicleController::steeringInput</a></div><div class="ttdeci">float steeringInput</div><div class="ttdoc">Steering input (-1.0 = full left, 0.0 = straight, 1.0 = full right)</div><div class="ttdef"><b>Definition</b> VehicleController.hpp:19</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleController_html_af8b0e831337719f0e7653248573a8b9c"><div class="ttname"><a href="../../de/d81/structPhysics_1_1Component_1_1VehicleController.html#af8b0e831337719f0e7653248573a8b9c">Physics::Component::VehicleController::handBrakeInput</a></div><div class="ttdeci">float handBrakeInput</div><div class="ttdoc">Handbrake input (0.0 = off, 1.0 = full handbrake)</div><div class="ttdef"><b>Definition</b> VehicleController.hpp:25</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleInternal_html"><div class="ttname"><a href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Physics::Component::VehicleInternal</a></div><div class="ttdoc">Internal vehicle component storing Jolt-specific data.</div><div class="ttdef"><b>Definition</b> VehicleInternal.hpp:21</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleInternal_html_a80cbef2be9391bf7e507d22d903fddbf"><div class="ttname"><a href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#a80cbef2be9391bf7e507d22d903fddbf">Physics::Component::VehicleInternal::chassisBodyID</a></div><div class="ttdeci">JPH::BodyID chassisBodyID</div><div class="ttdoc">BodyID of the chassis.</div><div class="ttdef"><b>Definition</b> VehicleInternal.hpp:37</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleInternal_html_aa0e3dfd8489cffe28aef8678dcc4c5de"><div class="ttname"><a href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#aa0e3dfd8489cffe28aef8678dcc4c5de">Physics::Component::VehicleInternal::vehicleConstraint</a></div><div class="ttdeci">JPH::Ref&lt; JPH::VehicleConstraint &gt; vehicleConstraint</div><div class="ttdoc">The Jolt vehicle constraint (owns the vehicle physics) Using Jolt's Ref smart pointer for proper refe...</div><div class="ttdef"><b>Definition</b> VehicleInternal.hpp:24</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleInternal_html_ac3ea77cbf9ee3c94d220c846a9db1291"><div class="ttname"><a href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#ac3ea77cbf9ee3c94d220c846a9db1291">Physics::Component::VehicleInternal::IsValid</a></div><div class="ttdeci">bool IsValid() const</div><div class="ttdoc">Check if the vehicle constraint is valid.</div><div class="ttdef"><b>Definition</b> VehicleInternal.hpp:42</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a590c81e848be50801279af428b810552" name="a590c81e848be50801279af428b810552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a590c81e848be50801279af428b810552">&#9670;&#160;</a></span>VehicleRPMUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::VehicleRPMUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update per-vehicle RPM telemetry from Jolt controller. Runs in FixedTimeUpdate. </p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>{</div>
<div class="line"><span class="lineno">   15</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">   16</span>    <span class="keyword">auto</span> &amp;physicsManager = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../da/d55/classPhysics_1_1Resource_1_1PhysicsManager.html">Resource::PhysicsManager</a>&gt;();</div>
<div class="line"><span class="lineno">   17</span> </div>
<div class="line"><span class="lineno">   18</span>    <span class="keywordflow">if</span> (!physicsManager.IsPhysicsActivated())</div>
<div class="line"><span class="lineno">   19</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>    <span class="keyword">auto</span> &amp;telemetry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#a29ab23da9acb31dbd5b13fa935754451">GetResource</a>&lt;<a class="code hl_class" href="../../df/dec/classPhysics_1_1Resource_1_1VehicleTelemetry.html">Resource::VehicleTelemetry</a>&gt;();</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>    <span class="keyword">auto</span> view = registry.view&lt;<a class="code hl_struct" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Component::VehicleInternal</a>&gt;();</div>
<div class="line"><span class="lineno">   24</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [e, internal] : view.each())</div>
<div class="line"><span class="lineno">   25</span>    {</div>
<div class="line"><span class="lineno">   26</span>        <span class="keywordflow">if</span> (!internal.IsValid() || !internal.vehicleConstraint)</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>        <span class="keyword">auto</span> *controller = <span class="keyword">static_cast&lt;</span>JPH::WheeledVehicleController *<span class="keyword">&gt;</span>(internal.vehicleConstraint-&gt;GetController());</div>
<div class="line"><span class="lineno">   30</span>        <span class="keywordflow">if</span> (!controller)</div>
<div class="line"><span class="lineno">   31</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordtype">float</span> rpm = controller-&gt;GetEngine().GetCurrentRPM();</div>
<div class="line"><span class="lineno">   34</span>        <span class="keywordflow">if</span> (rpm &lt; 0.0f)</div>
<div class="line"><span class="lineno">   35</span>            rpm = 0.0f;</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>        <a class="code hl_struct" href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a> eid{<span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="../../de/ded/structEngine_1_1EntityId.html#a083b2bd84f6265995367aa4d1b28f335">Engine::EntityId::ValueType</a><span class="keyword">&gt;</span>(e)};</div>
<div class="line"><span class="lineno">   38</span>        telemetry.SetRPM(eid, rpm);</div>
<div class="line"><span class="lineno">   39</span>    }</div>
<div class="line"><span class="lineno">   40</span>}</div>
<div class="ttc" id="aclassPhysics_1_1Resource_1_1VehicleTelemetry_html"><div class="ttname"><a href="../../df/dec/classPhysics_1_1Resource_1_1VehicleTelemetry.html">Physics::Resource::VehicleTelemetry</a></div><div class="ttdef"><b>Definition</b> VehicleTelemetry.hpp:17</div></div>
<div class="ttc" id="astructEngine_1_1EntityId_html"><div class="ttname"><a href="../../de/ded/structEngine_1_1EntityId.html">Engine::EntityId</a></div><div class="ttdoc">Represents a unique identifier for an entity in the Engine's entity-component system.</div><div class="ttdef"><b>Definition</b> EntityId.hpp:18</div></div>
<div class="ttc" id="astructEngine_1_1EntityId_html_a083b2bd84f6265995367aa4d1b28f335"><div class="ttname"><a href="../../de/ded/structEngine_1_1EntityId.html#a083b2bd84f6265995367aa4d1b28f335">Engine::EntityId::ValueType</a></div><div class="ttdeci">Id::ValueType ValueType</div><div class="ttdef"><b>Definition</b> EntityId.hpp:19</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a604bcdc7aa04408b24b31fde178ac0d3" name="a604bcdc7aa04408b24b31fde178ac0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a604bcdc7aa04408b24b31fde178ac0d3">&#9670;&#160;</a></span>WheelTransformSyncSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Physics::System::WheelTransformSyncSystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classEngine_1_1Core.html">Engine::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sync wheel entity transforms with Jolt vehicle wheel positions. </p>
<p>Should run every physics tick (FixedTimeUpdate scheduler) AFTER PhysicsUpdate. Updates the Transform component of each wheel entity to match the computed wheel position and rotation from the vehicle constraint. </p>
<div class="fragment"><div class="line"><span class="lineno">   15</span>{</div>
<div class="line"><span class="lineno">   16</span>    <span class="keyword">auto</span> &amp;registry = core.<a class="code hl_function" href="../../d4/d18/classEngine_1_1Core.html#aefea4646026e43c1a8f3317b77ada312">GetRegistry</a>();</div>
<div class="line"><span class="lineno">   17</span> </div>
<div class="line"><span class="lineno">   18</span>    registry.view&lt;<a class="code hl_struct" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Component::VehicleInternal</a>&gt;().each([&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html">Component::VehicleInternal</a> &amp;internal) {</div>
<div class="line"><span class="lineno">   19</span>        <span class="keywordflow">if</span> (!internal.<a class="code hl_function" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#ac3ea77cbf9ee3c94d220c846a9db1291">IsValid</a>() || !internal.<a class="code hl_variable" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#aa0e3dfd8489cffe28aef8678dcc4c5de">vehicleConstraint</a>)</div>
<div class="line"><span class="lineno">   20</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>        JPH::VehicleConstraint *constraint = internal.<a class="code hl_variable" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#aa0e3dfd8489cffe28aef8678dcc4c5de">vehicleConstraint</a>;</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++i)</div>
<div class="line"><span class="lineno">   25</span>        {</div>
<div class="line"><span class="lineno">   26</span>            <a class="code hl_class" href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a> wheelEntity{core, internal.<a class="code hl_variable" href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#a3087864db529dd0ca034f8f94f407ed2">wheelEntities</a>[i]};</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">if</span> (!wheelEntity.IsAlive())</div>
<div class="line"><span class="lineno">   28</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>            <span class="keyword">auto</span> *wheelTransform = wheelEntity.TryGetComponent&lt;<a class="code hl_struct" href="../../d6/d4d/structObject_1_1Component_1_1Transform.html">Object::Component::Transform</a>&gt;();</div>
<div class="line"><span class="lineno">   31</span>            <span class="keywordflow">if</span> (!wheelTransform)</div>
<div class="line"><span class="lineno">   32</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>            JPH::RMat44 wheelWorldTransform =</div>
<div class="line"><span class="lineno">   35</span>                constraint-&gt;GetWheelWorldTransform(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(i), JPH::Vec3::sAxisY(), JPH::Vec3::sAxisZ());</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>            JPH::Quat meshRotation = JPH::Quat::sRotation(JPH::Vec3::sAxisZ(), JPH::DegreesToRadians(90.0f));</div>
<div class="line"><span class="lineno">   38</span>            JPH::Quat finalRot = wheelWorldTransform.GetQuaternion() * meshRotation;</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>            wheelTransform-&gt;SetPosition(Utils::FromJoltVec3(wheelWorldTransform.GetTranslation()));</div>
<div class="line"><span class="lineno">   41</span>            wheelTransform-&gt;SetRotation(Utils::FromJoltQuat(finalRot));</div>
<div class="line"><span class="lineno">   42</span>        }</div>
<div class="line"><span class="lineno">   43</span>    });</div>
<div class="line"><span class="lineno">   44</span>}</div>
<div class="ttc" id="aclassEngine_1_1Entity_html"><div class="ttname"><a href="../../da/d6e/classEngine_1_1Entity.html">Engine::Entity</a></div><div class="ttdoc">Wrapper class providing a convenient interface for entity manipulation in the ECS system.</div><div class="ttdef"><b>Definition</b> Entity.hpp:34</div></div>
<div class="ttc" id="astructPhysics_1_1Component_1_1VehicleInternal_html_a3087864db529dd0ca034f8f94f407ed2"><div class="ttname"><a href="../../dc/dba/structPhysics_1_1Component_1_1VehicleInternal.html#a3087864db529dd0ca034f8f94f407ed2">Physics::Component::VehicleInternal::wheelEntities</a></div><div class="ttdeci">std::array&lt; Engine::EntityId, 4 &gt; wheelEntities</div><div class="ttdoc">Entity IDs of the 4 wheel entities (for transform sync)</div><div class="ttdef"><b>Definition</b> VehicleInternal.hpp:31</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d8/d54/namespacePhysics.html">Physics</a></li><li class="navelem"><a class="el" href="../../d2/dcc/namespacePhysics_1_1System.html">System</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
